<template>
  <div class="container">
    <button class="button button--outline" @click="openModal()">Open onboarding</button>
    <Modal :name="'wizard'" :isOpen="isModalOpen" @closeModal="closeModal">
      <div class="wizard">
        <Header :stepNames="stepNames" :currentStep="step"></Header>
        <WizardStep
          v-if="isCurrentStep(1)"
          :title="'Step 1 Title'"
          :subTitle="'Step 1 Subtitle'"
          :stepNum="1">
        </WizardStep>
        <WizardStep
          v-if="isCurrentStep(2)"
          :title="'Step 2 Title'"
          :subTitle="'Step 2 Subtitle'"
          :stepNum="2">
          <LoadCARTOVL></LoadCARTOVL>
        </WizardStep>
        <WizardStep
          v-if="isCurrentStep(3)"
          :title="'Step 3'"
          :subTitle="'Step 3 Subtitle'"
          :stepNum="3">
          <DefineContainer></DefineContainer>
        </WizardStep>
        <WizardStep
          v-if="isCurrentStep(4)"
          :title="'Step 4'"
          :subTitle="'Step 4 Subtitle'"
          :stepNum="4">
          <CreateTheMap></CreateTheMap>
        </WizardStep>
        <WizardStep
          v-if="isCurrentStep(5)"
          :title="'Step 5'"
          :subTitle="'Step 5 Subtitle'"
          :stepNum="5">
          <AddDataLayer></AddDataLayer>
        </WizardStep>
        <Footer :stepNames="stepNames" :currentStep="step"  @goToStep="goToStep"></Footer>
      </div>
    </Modal>
  </div>
</template>

<script>
import WizardStep from 'new-dashboard/components/Wizard/WizardStep.vue';
import Header from 'new-dashboard/components/Wizard/Header.vue';
import Footer from 'new-dashboard/components/Wizard/Footer.vue';
import Modal from 'new-dashboard/components/Modal.vue';
// Steps
import LoadCARTOVL from 'new-dashboard/components/Wizard/Steps/CARTOVL/LoadCARTOVL.vue';
import DefineContainer from 'new-dashboard/components/Wizard/Steps/CARTOVL/DefineContainer.vue';
import CreateTheMap from 'new-dashboard/components/Wizard/Steps/CARTOVL/CreateTheMap.vue';
import AddDataLayer from 'new-dashboard/components/Wizard/Steps/CARTOVL/AddDataLayer.vue';

export default {
  name: 'Wizard',
  components: {
    WizardStep,
    Header,
    Footer,
    Modal,
    LoadCARTOVL,
    DefineContainer,
    CreateTheMap,
    AddDataLayer
  },
  props: {
    maxSteps: {
      type: Number,
      default: 5
    }
  },
  data () {
    return {
      step: 1,
      stepNames: [
        'Intro',
        'Load CARTO VL',
        'Create map',
        'Add data layer',
        'Download'
      ],
      isModalOpen: false
    };
  },
  methods: {
    goToStep (stepNum) {
      this.step = stepNum;
    },
    isCurrentStep (stepNum) {
      return this.step === stepNum;
    },
    openModal () {
      this.isModalOpen = true;
    },
    closeModal () {
      this.isModalOpen = false;
    }
  }
};
</script>
<style scoped lang="scss">
@import 'new-dashboard/styles/variables';

.wizard {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  height: 100%;
  background-color: $onboarding__bg-color;
}
</style>
